(()=>{"use strict";const e=window.wp.i18n,s=window.wp.hooks,i=window.wp.data,a=window.wp.blockEditor,n=window.wp.components;function l(e){var s,i,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e)){var n=e.length;for(s=0;s<n;s++)e[s]&&(i=l(e[s]))&&(a&&(a+=" "),a+=i)}else for(i in e)e[i]&&(a&&(a+=" "),a+=i);return a}const o=window.ReactJSXRuntime;function t({attributes:e}){const{url:s,alt:i,caption:n,align:t,width:r,height:c,aspectRatio:d,scale:m,enableResponsiveImageSources:p}=e,u=(0,a.__experimentalGetBorderClassesAndStyles)(e),g="function"==typeof a.__experimentalGetShadowClassesAndStyles?(0,a.__experimentalGetShadowClassesAndStyles)(e):{},v=p.filter((({srcset:e,mediaType:s,mediaValue:i})=>e&&s&&i)),_=function(){for(var e,s,i=0,a="",n=arguments.length;i<n;i++)(e=arguments[i])&&(s=l(e))&&(a&&(a+=" "),a+=s);return a}({[`align${t}`]:t,"has-custom-border":!!u.className||u.style&&Object.keys(u.style).length>0}),b=(0,a.useBlockProps)({className:_});return(0,o.jsxs)("figure",{...b,children:[(0,o.jsxs)("picture",{children:[v.length>0&&v.map((({srcset:e,mediaType:s,mediaValue:i},a)=>(0,o.jsx)("source",{srcSet:e,media:`(${s}: ${i}px)`},a))),(0,o.jsx)("img",{src:s,className:u.className||void 0,style:{...u.style,...g.style,aspectRatio:d,objectFit:m,width:r,height:c},alt:i})]}),!a.RichText.isEmpty(n)&&(0,o.jsx)(a.RichText.Content,{className:(0,a.__experimentalGetElementClassName)("caption"),tagName:"figcaption",value:n})]})}const r=window.wp.element,c=window.wp.coreData,d=window.wp.notices,m=window.wp.primitives;var p=(0,o.jsx)(m.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)(m.Path,{d:"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z"})}),u=(0,o.jsx)(m.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)(m.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"})});const g=window.wp.blob,v=isNaN(parseInt(window?.enableResponsiveImage?.defaultMediaValue))?600:parseInt(window?.enableResponsiveImage?.defaultMediaValue),_="1"===window?.enableResponsiveImage?.showPreviewButton,b=[{label:(0,e.__)("max-width","enable-responsive-image"),value:"max-width"},{label:(0,e.__)("min-width","enable-responsive-image"),value:"min-width"}];function h({source:s={srcset:void 0,id:void 0,slug:void 0,mediaType:void 0,mediaValue:void 0},disableMoveUp:l=!1,disableMoveDown:t=!1,disableActions:m=!1,onChangeOrder:_,onChange:h,onRemove:x,isSelected:w}){const{id:j,srcset:C,mediaType:S,mediaValue:f,slug:y}=s,R=(0,i.useSelect)((e=>j&&w?e(c.store).getEntityRecord("postType","attachment",j):null),[j,w]),{mediaUpload:k,imageSizes:N}=(0,i.useSelect)((e=>({imageSizes:e(a.store).getSettings().imageSizes,mediaUpload:e(a.store).getSettings().mediaUpload})),[]),{createErrorNotice:I,removeAllNotices:M}=(0,i.useDispatch)(d.store),[V,B]=(0,r.useState)(!1),P=N.filter((({slug:e})=>R?.media_details?.sizes?.[e]?.source_url)).map((({name:e,slug:s})=>({value:s,label:e})));function T(e){e&&h({...s,srcset:e.url,id:e.id,slug:s.slug||"full",mediaType:s.mediaType||b[0].value,mediaValue:s.mediaValue||v})}function L(e){k({allowedTypes:["image"],filesList:e,onFileChange([e]){(0,g.isBlobURL)(e?.url)?B(!0):(T(e),B(!1))},onError(e){M(),I(e,{type:"snackbar"})}})}return(0,o.jsxs)(n.__experimentalVStack,{spacing:4,children:[(0,o.jsxs)(n.__experimentalVStack,{spacing:2,children:[(0,o.jsx)(a.MediaUpload,{onSelect:T,allowedTypes:["image"],value:j,render:({open:s})=>(0,o.jsxs)("div",{className:"enable-responsive-image__container",children:[(0,o.jsx)(n.Button,{className:j?"enable-responsive-image__preview":"enable-responsive-image__toggle",onClick:s,children:j&&C?(0,o.jsx)("img",{src:C,alt:""}):V?(0,o.jsx)(n.Spinner,{}):(0,e.__)("Set image source","enable-responsive-image")}),(0,o.jsx)(n.__experimentalHStack,{className:"enable-responsive-image__movers",expanded:!1,children:!(l&&t)&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.Button,{className:"enable-responsive-image__mover",label:(0,e.__)("Move up","enable-responsive-image"),icon:p,size:"small",disabled:l,onClick:()=>_?.(-1)}),(0,o.jsx)(n.Button,{className:"enable-responsive-image__mover",label:(0,e.__)("Move down","enable-responsive-image"),icon:u,size:"small",disabled:t,onClick:()=>_?.(1)})]})}),!m&&(0,o.jsxs)(n.__experimentalHStack,{className:"enable-responsive-image__actions",children:[(0,o.jsx)(n.Button,{className:"enable-responsive-image__action",onClick:s,"aria-hidden":"true",size:"compact",children:j?(0,e.__)("Replace","enable-responsive-image"):(0,e.__)("Select","enable-responsive-image")}),(0,o.jsx)(n.Button,{className:"enable-responsive-image__action",onClick:x,size:"compact",children:(0,e.__)("Remove","enable-responsive-image")})]}),(0,o.jsx)(n.DropZone,{onFilesDrop:L})]})}),!!j&&C&&(0,o.jsx)(n.ExternalLink,{className:"enable-responsive-image__url",href:C,children:C})]}),!!j&&C&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.__experimentalToggleGroupControl,{__nextHasNoMarginBottom:!0,isBlock:!0,label:(0,e.__)("Media query type","enable-responsive-image"),onChange:function(e){const i=b.find((s=>s.value===e));i&&h({...s,mediaType:i.value})},value:S||b[0].value,size:"__unstable-large",children:b.map((({label:e,value:s})=>(0,o.jsx)(n.__experimentalToggleGroupControlOption,{label:e,value:s},s)))}),(0,o.jsx)(n.RangeControl,{__nextHasNoMarginBottom:!0,label:(0,e.__)("Media query value (px)","enable-responsive-image"),value:f||v,onChange:function(e){h({...s,mediaValue:e})},min:100,max:2e3,allowReset:!0,initialPosition:v,__next40pxDefaultSize:!0}),(0,o.jsx)(n.SelectControl,{__nextHasNoMarginBottom:!0,label:(0,e.__)("Resolution","enable-responsive-image"),value:y,options:P,onChange:function(e){const i=R?.media_details?.sizes?.[e]?.source_url;if(!i)return null;h({...s,srcset:i,slug:e})},help:(0,e.__)("Select the size of the source image.","enable-responsive-image"),size:"__unstable-large"})]})]})}function x(s){const{attributes:i,setAttributes:l}=s,{enableResponsiveImageSources:t}=i;function c(e,s){const i=[...t];i[s]=e,l({enableResponsiveImageSources:i})}function d(e){const s=[...t];s.splice(e,1),l({enableResponsiveImageSources:s})}return(0,o.jsx)(n.PanelBody,{title:(0,e.__)("Image sources","enable-responsive-image"),className:"enable-responsive-image",children:(0,o.jsx)(a.MediaUploadCheck,{fallback:(0,o.jsx)("p",{children:(0,e.__)("To edit the image, you need permission to upload media.","enable-responsive-image")}),children:(0,o.jsx)(n.__experimentalVStack,{spacing:4,children:t.length>0?(0,o.jsxs)(o.Fragment,{children:[t.map(((e,i)=>(0,o.jsxs)(r.Fragment,{children:[(0,o.jsx)(h,{...s,disableMoveUp:0===i,disableMoveDown:i===t.length-1,disableActions:1===t.length&&!t[0].id&&!t[0].srcset,source:e,onChangeOrder:e=>function(e,s){const i=[...t],a=s+e,n=i.splice(s,1)[0];i.splice(a,0,n),l({enableResponsiveImageSources:i})}(e,i),onChange:e=>c(e,i),onRemove:()=>d(i)}),i<t.length-1&&(0,o.jsx)("hr",{})]},i))),(t.length>1||1===t.length&&t[0].id||t[0].srcset)&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("hr",{}),(0,o.jsx)(n.Button,{variant:"primary",className:"enable-responsive-image__add-source",disabled:t.length>=5,onClick:function(){const e=[...t];e.push({srcset:void 0,id:void 0,slug:void 0,mediaType:void 0,mediaValue:void 0}),l({enableResponsiveImageSources:e})},__next40pxDefaultSize:!0,children:(0,e.__)("Add image source","enable-responsive-image")})]})]}):(0,o.jsx)(h,{...s,disableMoveUp:!0,disableMoveDown:!0,disableActions:!0,onChange:e=>c(e,0),onRemove:()=>d(0)})})})})}const w={isPreview:!1},j=(0,i.createReduxStore)("enable-responsive-image",{reducer:(e=w,s)=>"UPDATE_IS_PREVIEW"===s.type?{...e,isPreview:!e.isPreview}:e,selectors:{getIsPreview:e=>e.isPreview},actions:{setIsPreview:e=>({type:"UPDATE_IS_PREVIEW",value:e})}});(0,i.register)(j);const C=()=>(0,o.jsxs)(n.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsx)(n.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M17 1H3C1.9 1 1 1.9 1 3V17C1 18.1 1.9 19 3 19H5L6.1 17.5H3C2.7 17.5 2.5 17.3 2.5 17V14.6L6.6 11.6L9.6 13.5C9.9 13.7 10.3 13.7 10.5 13.4L14 10L15.75 11.7L17.2 13L19 13.7V3C19 1.9 18.1 1 17 1ZM17 2.5H3C2.7 2.5 2.5 2.7 2.6 3V12.6L6.2 10C6.4 9.8 6.7 9.8 7 10L9.9 12L13.5 8.5C13.7 8.2 14.2 8.2 14.5 8.5L17.5 11.4V3C17.5 2.7 17.3 2.5 17 2.5Z"}),(0,o.jsx)(n.Path,{d:"M14.9996 23C16.9326 23 18.4996 21.433 18.4996 19.5C18.4996 17.567 16.9326 16 14.9996 16C13.0666 16 11.4996 17.567 11.4996 19.5C11.4996 21.433 13.0666 23 14.9996 23Z"}),(0,o.jsx)(n.Path,{d:"M8.0954 19.6419C8.39311 19.2062 8.84435 18.624 9.45434 18.0431C10.6731 16.8824 12.4972 15.75 14.9996 15.75C17.502 15.75 19.3261 16.8824 20.5449 18.0431C21.1549 18.624 21.6061 19.2062 21.9038 19.6419L23.1423 18.7956C22.7994 18.2938 22.2819 17.626 21.5794 16.9569C20.1731 15.6176 17.9972 14.25 14.9996 14.25C12.002 14.25 9.82613 15.6176 8.41986 16.9569C7.71735 17.626 7.19983 18.2938 6.85693 18.7956L8.0954 19.6419Z"})]});(0,s.addFilter)("blocks.registerBlockType","enable-responsive-image/add-source-attributes",(e=>"core/image"!==e.name?e:{...e,attributes:{...e.attributes,enableResponsiveImageSources:{type:"array",items:{type:"number"},default:[]}}})),(0,s.addFilter)("editor.BlockEdit","enable-responsive-image/with-inspector-control",(s=>l=>{if("core/image"!==l.name)return(0,o.jsx)(s,{...l});const{attributes:r}=l,{url:c,enableResponsiveImageSources:d}=r,m=(0,i.useSelect)((e=>e("enable-responsive-image").getIsPreview()),[]),{setIsPreview:p}=(0,i.useDispatch)("enable-responsive-image");return(0,o.jsxs)(o.Fragment,{children:[c&&d?.length>0&&m?(0,o.jsx)(t,{...l}):(0,o.jsx)(s,{...l}),c&&d?.length>0&&_&&(0,o.jsx)(a.BlockControls,{group:"parent",children:(0,o.jsx)(n.ToolbarGroup,{children:(0,o.jsx)(n.ToolbarButton,{icon:C,isPressed:m,label:m?(0,e.__)("Disable responsive image preview","enable-responsive-image"):(0,e.__)("Enable responsive image preview","enable-responsive-image"),onClick:()=>p(!m)})})}),c&&(0,o.jsx)(a.InspectorControls,{children:(0,o.jsx)(x,{...l})})]})}))})();